(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{2:function(e,t,a){e.exports={App:"styles_App__37WGR",Searchbar:"styles_Searchbar__o8efk",SearchForm:"styles_SearchForm__1_vaQ","SearchForm-button":"styles_SearchForm-button__2rTX1","SearchForm-button-label":"styles_SearchForm-button-label__2v9Yt","SearchForm-input":"styles_SearchForm-input__2aH60",ImageGallery:"styles_ImageGallery__2gRXH",ImageGalleryItem:"styles_ImageGalleryItem__cQ0Gz","ImageGalleryItem-image":"styles_ImageGalleryItem-image__18DvS",Overlay:"styles_Overlay__2iJWX",Modal:"styles_Modal__3uinw",Button:"styles_Button__zuJ0x",Loader:"styles_Loader__2peHu"}},26:function(e,t,a){e.exports=a(71)},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=a(12),u=a(4),s=a.n(u),i=a(11),m=a(7),g=a(8),h=a(10),p=a(9),y=a(2),f=a.n(y),d=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){var a=t.target.value;e.setState({query:a})},e.handleSubmit=function(t){t.preventDefault(),e.props.onChangeQuery(e.state.query),e.reset()},e.reset=function(){e.setState({query:""})},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.state.query;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:f.a.Searchbar},r.a.createElement("form",{className:f.a.SearchForm,onSubmit:this.handleSubmit},r.a.createElement("button",{type:"submit",className:f.a["SearchForm-button"]},r.a.createElement("span",{className:f.a["SearchForm-button-label"]},"Search")),r.a.createElement("input",{className:f.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange,value:e}))))}}]),a}(n.Component),v=a(23),b=a.n(v),_="15871594-e6aabc3dbb9db4d877f262370",E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=b.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat(_,"&image_type=photo&orientation=horizontal&per_page=12"));return a},S=a(25),w=function(e){var t=e.closeModal,a=e.children,c=function(e){"Escape"===e.key&&t()};return Object(n.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}})),r.a.createElement("div",{className:f.a.Overlay,onClick:function(e){"IMG"!==e.target.nodeName&&t()}},r.a.createElement("div",{className:f.a.Modal},r.a.createElement(r.a.Fragment,null,a)))},F=function(e){var t=e.url,a=e.alt,c=e.largeImageURL,l=Object(n.useState)(!1),o=Object(S.a)(l,2),u=o[0],s=o[1];return r.a.createElement("li",{className:f.a.ImageGalleryItem},r.a.createElement("img",{src:t,alt:a,className:f.a["ImageGalleryItem-image"],onClick:function(){return s(!0)}}),u&&r.a.createElement(w,{closeModal:function(){return s(!1)}},r.a.createElement("img",{src:c,alt:a})))},I=function(e){var t=e.gallery;return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:f.a.ImageGallery},t.map((function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL,c=e.tags;return r.a.createElement(F,{key:t,url:a,alt:c,largeImageURL:n})}))))},O=function(e){var t=e.pageChanger;return r.a.createElement("button",{type:"button",className:f.a.Button,onClick:t},"Load more")},j=a(24),k=a.n(j),C=(a(70),function(){return r.a.createElement("div",{className:f.a.Loader},r.a.createElement(k.a,{type:"Puff",color:"#00BFFF",height:100,width:100}))}),L=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={gallery:[],query:"",page:1,isLoading:!1,error:!1},e.onChangeQuery=function(t){e.setState({query:t,page:1,gallery:[]})},e.fetchRequest=Object(i.a)(s.a.mark((function t(){var a,n,r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state,n=a.query,r=a.page,t.next=4,E(n,r);case 4:return c=t.sent,t.abrupt("return",c.data.hits);case 8:t.prev=8,t.t0=t.catch(0),e.setState({error:!0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.pageChanger=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(g.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,r=n.query,c=n.page;r!==t.query&&(this.setState({isLoading:!0}),function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchRequest();case 2:t=e.sent,a.setState({gallery:Object(o.a)(t),isLoading:!1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());c!==t.page&&(this.setState({isLoading:!0}),function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchRequest();case 2:t=e.sent,a.setState((function(e){return{gallery:[].concat(Object(o.a)(e.gallery),Object(o.a)(t)),isLoading:!1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}},{key:"render",value:function(){var e=this.state,t=e.gallery,a=e.isLoading,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,{onChangeQuery:this.onChangeQuery}),n&&r.a.createElement("h1",null,"something gone wrong, try again later"),!!t.length&&!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{gallery:t}),!a&&r.a.createElement(O,{pageChanger:this.pageChanger})),a&&r.a.createElement(C,null))}}]),a}(n.Component);var q=function(){return r.a.createElement(L,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.8731af04.chunk.js.map